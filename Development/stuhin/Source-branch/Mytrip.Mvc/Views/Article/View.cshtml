@inherits System.Web.Mvc.WebViewPage<Mytrip.Articles.Models.ArticleViewModel>
@{ 
    /* Copyright © 2009 - 2010 Oleg Stuhin & Rostislav Haitovich 
       To learn more about Mytrip.Mvc visit  
       http://mytripmvc.net  http://mytripmvc.codeplex.com 
       mytripmvc@gmail.com
       license: Microsoft Public License (Ms-PL) */ 
}
@{
    View.Title = Html.MytripPageTitle(Model.Article.Title, "/");
    LayoutPage = "~/Views/Shared/_Layout.cshtml";
    View.Keywords=Html.MytripPageTitle(Model.Article.Title, ",");
    View.Description=Html.MytripPageTitle(Model.Article.Title, ",");
}
@section scriptlink{
@Html.ScriptLink("MicrosoftAjax.js,MicrosoftMvcAjax.js,MicrosoftMvcValidation.js,jHtmlArea.Mytrip.js,jHtmlArea.Smiles.js,SLPlaerChrome.js,Page/Article.View.js")

}
@section contentSmall{
@Html.Partial("_sideBar") 
}
@section contentBig{
<div id="votes" class="right">
@Html.ArticleRating(Model.Article.ApprovedVotes, true, Model.Article.TotalVotes, Model.VotesCount)
@Html.HiddenFor(x=>x.VotesCount)
@Html.HiddenFor(x=>x.Article.ArticleId)
</div>
@Html.ShowTitleArticle(Model.Article, Model.ReturnId) 
<div class="content">
@Html.ShowBodyArticle(Model.Article) 
<table class="noborders"><tr><td>
@Html.ArticlePager(Model.PagesIds,Model.Path)
</td><td>
@Html.ArticleOptions(Model.Article,Model.isSubscribed)
</td></tr></table>
</div><div class="last"></div> 
<table class="content"><tr>
<td class="first1" style="@Model.tableWidth"></td>
@if (Model.showRelatedLinks){
<td class="last1" style="@Model.tableWidth"></td> 
}
</tr><tr>
<td class="first2" style="@Model.tableWidth">
<div class="info">
@Html.ShowArticleTags(Model.Article)
@Html.ArticleSpecification(Model.Article)
</div>
</td>
@if (Model.showRelatedLinks){ 
<td class="last2" style="@Model.tableWidth"> 
<div class="info">
@Html.ShowRelated(Model.Article)
</div></td>
} 
</tr><tr><td class="first3" style="@Model.tableWidth"></td>
@if (Model.showRelatedLinks){
<td class="last3" style="@Model.tableWidth"></td>
}
</tr></table>
@Html.ShowComments(Model.Article, Model.ReturnId)     
@if (Model.Article.ApprovedComment && (User.Identity.IsAuthenticated || Model.Article.IncludeAnonymComment)) {
if (Model.Blog){
<h3 class="title">@ArticleLanguage.add_comment</h3>
}  
{Html.EnableClientValidation();}
{using (Html.BeginForm(new {id=Model.Article.ArticleId })){
<div class="last"></div>
<div class="content">
@Html.HiddenFor(model => model.Blog)
@Html.HiddenFor(model => model.Path)
@Html.HiddenFor(model => model.Title)
@Html.HiddenFor(model => model.Username)
@Html.HiddenFor(model => model.ReturnId)
@if (!User.Identity.IsAuthenticated && Model.Article.IncludeAnonymComment){
<div class="editor-label">
@Html.MytripLabelFor("AnonymName", ArticleLanguage.name)
</div><div class="editor-field">
@Html.TextBoxFor(model => model.AnonymName)
@Html.ValidationMessageFor(model => model.AnonymName)
</div><div class="editor-label">
@Html.MytripLabelFor("AnonymEmail", ArticleLanguage.email)
</div><div class="editor-field">
@Html.TextBoxFor(model => model.AnonymEmail) 
@Html.ValidationMessageFor(model => model.AnonymEmail)
</div>
} 
<div class="editor-field"><div class="dark">
@Html.TextAreaFor(model => model.Comment, new { id = "article", style = "height: 150px; width:400px;" })
@Html.ValidationMessageFor(model => model.Comment)
</div></div>
@if (!User.Identity.IsAuthenticated && Model.Article.IncludeAnonymComment){
<div class="editor-label">
@Html.CaptchaImage(202, 60, "Times New Roman")
</div><div class="editor-field">
@Html.TextBoxFor(model => model.Captcha)
@Html.ValidationMessageFor(model => model.Captcha)
</div>   
} 
@Html.HiddenFor(model => model.CommentApproved)
<div class="button">
@Html.MytripButton(ArticleLanguage.create, true,"left")
</div></div>
}  
}
}
<div id="deleteModal" class="window"> 
<div class="modalTC">@CoreLanguage.delete</div>
<div class="modalC">
<table class="leftmidle"><tr><td>
@Html.MytripImage("/images/warning.png","warning","i")
</td><td>
<h3 class="hometitle">@CoreLanguage.are_you_sure</h3>
</td></tr></table>  
<div class="button">
@Html.MytripButton(CoreLanguage.cancel, false, "cancel","right")
@Html.MytripButton(CoreLanguage.remove, true, "ok","right")      
</div>
</div> 
</div>

<div id="editComment" style="display:none;"> 
<div>@Html.MytripImage("/images/edite.png","edit","img14")
@ArticleLanguage.edit_comment</div>
<table>
<tr>
<td>
<div class="editor-field"><div class="dark">
@Html.TextArea("EditComment", new { id = "edit", style = "height: 150px; width:400px;" })
</div></div>
<span class="field-validation-valid" id="Comment_Error"></span>
@Html.Hidden("editId")
</td></tr></table>  
<div class="button">
@Html.MytripButton(CoreLanguage.cancel, true, "cancelEdit","right")
@Html.MytripButton("   Ok   ", false, "edit","right")   
</div> 
</div>   
}

